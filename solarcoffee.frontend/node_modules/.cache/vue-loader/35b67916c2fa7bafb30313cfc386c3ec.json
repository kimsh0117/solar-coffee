{"remainingRequest":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/src/views/Inventory.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/src/views/Inventory.vue","mtime":1615323636500},{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/cache-loader/dist/cjs.js","mtime":1615150631837},{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/babel-loader/lib/index.js","mtime":1615150631849},{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/ts-loader/index.js","mtime":1615150637072},{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/cache-loader/dist/cjs.js","mtime":1615150631837},{"path":"/Users/kimsanghun/Documents/SolarCoffee/solarcoffee.frontend/node_modules/vue-loader/lib/index.js","mtime":1615150641385}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IHsgUHJvZHVjdCwgUHJvZHVjdEludmVudG9yeSB9IGZyb20gIkAvdHlwZXMvUHJvZHVjdCI7CmltcG9ydCB7IFNoaXBtZW50IH0gZnJvbSAiQC90eXBlcy9TaGlwbWVudCI7CmltcG9ydCBTb2xhckJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvU29sYXJCdXR0b24udnVlIjsKaW1wb3J0IE5ld1Byb2R1Y3RNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvbW9kYWwvTmV3UHJvZHVjdE1vZGFsLnZ1ZSI7CmltcG9ydCB7IEludmVudG9yeVNlcnZpY2UsIFByb2R1Y3RTZXJ2aWNlIH0gZnJvbSAiQC9zZXJ2aWNlcyI7CmltcG9ydCBTaGlwbWVudE1vZGFsIGZyb20gIkAvY29tcG9uZW50cy9tb2RhbC9TaGlwbWVudE1vZGFsLnZ1ZSI7Cgpjb25zdCBpbnZlbnRvcnlTZXJ2aWNlID0gbmV3IEludmVudG9yeVNlcnZpY2UoKTsKY29uc3QgcHJvZHVjdFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNlcnZpY2UoKTsKCkBDb21wb25lbnQoewogIG5hbWU6ICJJbnZlbnRvcnkiLAogIGNvbXBvbmVudHM6IHsgU29sYXJCdXR0b24sIE5ld1Byb2R1Y3RNb2RhbCwgU2hpcG1lbnRNb2RhbCB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmVudG9yeSBleHRlbmRzIFZ1ZSB7CiAgaXNOZXdQcm9kdWN0VmlzaWJsZSA9IGZhbHNlOwogIGlzU2hpcG1lbnRWaXNpYmxlID0gZmFsc2U7CiAgaW52ZW50b3J5OiBQcm9kdWN0SW52ZW50b3J5W10gPSBbXTsKICBwdWJsaWMgYXBwbHlDb2xvcihjdXJyZW50OiBudW1iZXIsIHRhcmdldDogbnVtYmVyKSB7CiAgICByZXR1cm4gY3VycmVudCA8PSAwCiAgICAgID8gInJlZCIKICAgICAgOiBNYXRoLmFicyh0YXJnZXQgLSBjdXJyZW50KSA+IDgKICAgICAgPyAieWVsbG93IgogICAgICA6ICJncmVlbiI7CiAgfQogIGFzeW5jIGFyY2hpdmVQcm9kdWN0KHByb2R1Y3RJZDogbnVtYmVyKSB7CiAgICBhd2FpdCBwcm9kdWN0U2VydmljZS5hcmNoaXZlKHByb2R1Y3RJZCk7CiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTsKICB9CiAgcHVibGljIHNob3dOZXdQcm9kdWN0TW9kYWwoKTogdm9pZCB7CiAgICB0aGlzLmlzTmV3UHJvZHVjdFZpc2libGUgPSAhdGhpcy5pc05ld1Byb2R1Y3RWaXNpYmxlOwogIH0KICBwdWJsaWMgc2hvd1NoaXBtZW50TW9kYWwoKSB7CiAgICB0aGlzLmlzU2hpcG1lbnRWaXNpYmxlID0gIXRoaXMuaXNTaGlwbWVudFZpc2libGU7CiAgfQogIGFzeW5jIHNhdmVOZXdQcm9kdWN0KHByb2R1Y3Q6IFByb2R1Y3QpIHsKICAgIGF3YWl0IHByb2R1Y3RTZXJ2aWNlLnNhdmUocHJvZHVjdCk7CiAgICB0aGlzLmlzTmV3UHJvZHVjdFZpc2libGUgPSBmYWxzZTsKICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0KICBhc3luYyBzYXZlTmV3U2hpcG1lbnQoc2hpcG1lbnQ6IFNoaXBtZW50KSB7CiAgICBhd2FpdCBpbnZlbnRvcnlTZXJ2aWNlLnVwZGF0ZUludmVudG9yeVF1YW50aXR5KHNoaXBtZW50KTsKICAgIHRoaXMuaXNTaGlwbWVudFZpc2libGUgPSBmYWxzZTsKICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0KICBhc3luYyBpbml0aWFsaXplKCkgewogICAgdGhpcy5pbnZlbnRvcnkgPSBhd2FpdCBpbnZlbnRvcnlTZXJ2aWNlLmdldEludmVudG9yeSgpOwogIH0KICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7CiAgfQp9Cg=="},{"version":3,"sources":["Inventory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Inventory.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"inventory-container\">\n    <h1 id=\"inventoryTitle\">Inventory Dashboard</h1>\n    <hr />\n\n    <div class=\"inventory-actions\">\n      <solar-button @button:click=\"showNewProductModal\" id=\"addNewBtn\"\n        >Add New Item</solar-button\n      >\n      <solar-button @button:click=\"showShipmentModal\" id=\"receiveShipmentBtn\"\n        >Receive Shipment</solar-button\n      >\n    </div>\n\n    <table id=\"inventoryTable\" class=\"table\">\n      <tr>\n        <th>Item</th>\n        <th>Quantity On-Hand</th>\n        <th>Unit Price</th>\n        <th>Taxable</th>\n        <th>Delete</th>\n      </tr>\n\n      <tr v-for=\"item in inventory\" :key=\"item.id\">\n        <td>{{ item.product.name }}</td>\n        <td :class=\"`${applyColor(item.quantityOnHand, item.idealQuantity)}`\">\n          {{ item.quantityOnHand }}\n        </td>\n        <td>{{ item.product.price | price }}</td>\n        <td>\n          <span v-if=\"item.product.isTaxable\">Yes</span>\n          <span v-else>No</span>\n        </td>\n        <td>\n          <i\n            @click=\"archiveProduct(item.product.id)\"\n            class=\"lni lni-cross-circle product-archive\"\n          ></i>\n        </td>\n      </tr>\n    </table>\n\n    <new-product-modal\n      v-if=\"isNewProductVisible\"\n      @close=\"showNewProductModal\"\n      @save:product=\"saveNewProduct\"\n    ></new-product-modal>\n    <shipment-modal\n      v-if=\"isShipmentVisible\"\n      :inventory=\"inventory\"\n      @close=\"showShipmentModal\"\n      @save:shipment=\"saveNewShipment\"\n    ></shipment-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Product, ProductInventory } from \"@/types/Product\";\nimport { Shipment } from \"@/types/Shipment\";\nimport SolarButton from \"@/components/SolarButton.vue\";\nimport NewProductModal from \"@/components/modal/NewProductModal.vue\";\nimport { InventoryService, ProductService } from \"@/services\";\nimport ShipmentModal from \"@/components/modal/ShipmentModal.vue\";\n\nconst inventoryService = new InventoryService();\nconst productService = new ProductService();\n\n@Component({\n  name: \"Inventory\",\n  components: { SolarButton, NewProductModal, ShipmentModal }\n})\nexport default class Inventory extends Vue {\n  isNewProductVisible = false;\n  isShipmentVisible = false;\n  inventory: ProductInventory[] = [];\n  public applyColor(current: number, target: number) {\n    return current <= 0\n      ? \"red\"\n      : Math.abs(target - current) > 8\n      ? \"yellow\"\n      : \"green\";\n  }\n  async archiveProduct(productId: number) {\n    await productService.archive(productId);\n    await this.initialize();\n  }\n  public showNewProductModal(): void {\n    this.isNewProductVisible = !this.isNewProductVisible;\n  }\n  public showShipmentModal() {\n    this.isShipmentVisible = !this.isShipmentVisible;\n  }\n  async saveNewProduct(product: Product) {\n    await productService.save(product);\n    this.isNewProductVisible = false;\n    await this.initialize();\n  }\n  async saveNewShipment(shipment: Shipment) {\n    await inventoryService.updateInventoryQuantity(shipment);\n    this.isShipmentVisible = false;\n    await this.initialize();\n  }\n  async initialize() {\n    this.inventory = await inventoryService.getInventory();\n  }\n  async created() {\n    await this.initialize();\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"src/scss/global.scss\";\n\n.green {\n  font-weight: bold;\n  color: $solar-green;\n}\n.yellow {\n  font-weight: bold;\n  color: $solar-yellow;\n}\n.red {\n  font-width: bold;\n  color: $solar-red;\n}\n.inventory-actions {\n  display: flex;\n  margin-bottom: 0.8rem;\n}\n.product-archive {\n  cursor: pointer;\n  font-weight: bold;\n  font-size: 1.2rem;\n  color: $solar-red;\n}\n</style>\n"]}]}